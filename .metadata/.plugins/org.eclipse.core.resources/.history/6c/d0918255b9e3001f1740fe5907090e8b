package com.petfoster.services;

import org.modelmapper.ModelMapper;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.petfoster.model.Shelter;
import com.petfoster.modelDTO.ShelterDTO;
import com.petfoster.repository.ShelterRepository;

@Service
public class ShelterServices {

	@Autowired
	private ShelterRepository shelterRepo;
	
	@Autowired 
	private ModelMapper modelMapper;
	
	public ShelterDTO addShelter(ShelterDTO shelterDTO)
	{
		return modelMapper.map(shelterRepo.save(modelMapper.map(shelterDTO, Shelter.class)), ShelterDTO.class);
	}
	
	public ShelterDTO updateShelter(Long id, ShelterDTO shelterDTO)
	{
		Shelter shelter = shelterRepo.findById(id).orElseThrow(()-> new RuntimeException("No shelter found"));
		shelter.setName(shelterDTO.getName());
		shelter.setLocation(shelterDTO.getLocation());
		shelter.setCapacity(shelterDTO.getCapacity());
		shelter.setAvailablePetsCount(shelterDTO.getAvailablePetsCount());
		shelter.setContactInfo(shelterDTO.getContactInfo());
		
		shelterRepo.save(shelter);
		
		return modelMapper.map(shelter, ShelterDTO.class);
	}
}
